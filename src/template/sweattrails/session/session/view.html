{% extends "base.html" %}

{%  block head %}
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
{%  endblock %}

{% block css %}
    #route { height: 700px; }
{% endblock %}

{% block imports %}
    {{ import_maps() }}
{% endblock %}

{% block mainpage %}
{% endblock mainpage %}

{% block tabs %}
    <st:tab code="activity" label="Activity">
        <st:form name="session" url="/json/session/{{ key }}">
            <st:field id="description" type="text" property="description" label="Description"/>
            <st:field id="start_time" type="datetime" property="start_time" label="Date/time" readonly="true"/>
            <st:field id="distance" type="distance" property="distance" label="Distance" readonly="true"/>
            <st:field id="duration" type="time" timeformat="duration" property="duration" label="Duration" readonly="true"/>
            <st:footer position="right">
                <st:action mode="view" label="Edit" action="edit"/>
                <st:action mode="view" label="Delete" action="delete"/>
                <st:action mode="edit" label="Save" action="save"/>
                <st:action mode="edit" label="Cancel" action="cancel"/>
            </st:footer>
        </st:form>
    </st:tab>

    <st:tab code="graphs" label="Graphs">
        <st:graph name="graph" url="/json/waypoint/" xcoordinate="timestamp">
            <st:parameter name="parent" value="{{ key }}"/>
            <st:sort name="timestamp"/>
            <st:series>
                <!-- -->
            </st:series>
        </st:graph>
    </st:tab>

    <st:tab code="route" label="Route">
        <st:map name="route" url="/json/waypoint" coordinate="location">
            <st:parameter name="parent" value="{{ key }}"/>
            <st:sort name="timestamp"/>
        </st:map>
    </st:tab>
{% endblock tabs %}
